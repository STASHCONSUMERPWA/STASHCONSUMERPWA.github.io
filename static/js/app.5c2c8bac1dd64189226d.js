webpackJsonp([1],{"5wlR":function(t,e){},"9pmu":function(t,e){},FNVz:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("7+uW"),a=r("1mcD"),s=r.n(a),o=r("It2I"),i=r.n(o),c=(r("3VHS"),r("Dd8w")),u=r.n(c),l=r("NYxO"),m={name:"GeneralHeader",computed:u()({},Object(l.b)(["isAuthenticated"]))},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"navbar navbar-default navbar-fixed-top"},[e("div",{staticClass:"container"},[e("router-link",{staticClass:"navbar-brand",attrs:{to:{name:"home"}}},[this._v("\n      STASH\n    ")]),this._v(" "),this.isAuthenticated?e("ul",{staticClass:"nav navbar-nav pull-xs-right"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",exact:"",to:{name:"settings"}}},[e("i",{staticClass:"ion-gear-a"}),this._v("Â Settings\n        ")])],1)]):this._e()],1)])},staticRenderFns:[]};var p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("div",{staticClass:"container"},[e("router-link",{staticClass:"logo-font",attrs:{to:{name:"home",params:{}}}},[this._v("\n      STASH\n    ")]),this._v(" "),e("span",{staticClass:"attribution"},[this._v("\n      A project made by customer for you\n    ")])],1)])},staticRenderFns:[]},v={name:"App",components:{GeneralHeader:r("VU/8")(m,d,!1,function(t){r("9pmu")},"data-v-36b128c1",null).exports,GeneralFooter:r("VU/8")({name:"GeneralFooter"},p,!1,null,null,null).exports}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("GeneralHeader"),this._v(" "),e("div",{staticClass:"container_"},[e("router-view")],1),this._v(" "),e("GeneralFooter")],1)},staticRenderFns:[]};var h,g,_=r("VU/8")(v,f,!1,function(t){r("5wlR")},"data-v-698ab0b8",null).exports,w=r("//Fk"),C=r.n(w),b=r("/ocq"),S=r("bOdI"),U=r.n(S),x=r("mtWM"),E=r.n(x),y=r("Rf8U"),A=r.n(y),F=function(){return window.localStorage.getItem("id_token")},R=function(t){window.localStorage.setItem("id_token",t)},H=function(){window.localStorage.removeItem("id_token")},N="https://conduit.productionready.io/api",T={init:function(){n.a.use(A.a,E.a),n.a.axios.defaults.baseURL=N},setHeader:function(){n.a.axios.defaults.headers.common.Authorization="Token "+F()},query:function(t,e){return n.a.axios.get(t,e).catch(function(t){throw new Error("[STASH] ApiService "+t)})},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n.a.axios.get(t+"/"+e).catch(function(t){throw new Error("[STASH] ApiService "+t)})},post:function(t,e){return n.a.axios.post(""+t,e)},update:function(t,e,r){return n.a.axios.put(t+"/"+e,r)},put:function(t,e){return n.a.axios.put(""+t,e)},delete:function(t){return n.a.axios.delete(t).catch(function(t){throw new Error("[STASH] ApiService "+t)})}},P=T,k="auth/SET_AUTH",$={state:{errors:null,user:{},isAuthenticated:!!F()},actions:(h={},U()(h,"auth/LOGIN",function(t,e){return new C.a(function(r){P.post("users/login",{user:e}).then(function(e){var n=e.data;t.commit(k,n.user),r(n)}).catch(function(e){var r=e.response;t.commit("setError",r.data.errors)})})}),U()(h,"auth/LOGOUT",function(t){t.commit("auth/PURGE_AUTH")}),U()(h,"auth/REGISTER",function(t,e){return new C.a(function(r,n){P.post("users",{user:e}).then(function(e){var n=e.data;t.commit(k,n.user),r(n)}).catch(function(e){var r=e.response;t.commit("setError",r.data.errors),n(r)})})}),U()(h,"auth/CHECK_AUTH",function(t){if(!F())return t.commit("auth/PURGE_AUTH"),!1;P.setHeader(),P.get("user").then(function(e){var r=e.data;t.commit(k,r.user)}).catch(function(e){var r=e.response;t.commit("setError",r.data.errors)})}),U()(h,"auth/UPDATE_USER",function(t,e){var r=e.email,n=e.username,a=e.password,s=e.image,o={email:r,username:n,bio:e.bio,image:s};return a&&(o.password=a),P.put("user",o).then(function(e){var r=e.data;return t.commit(k,r.user),r})}),h),mutations:(g={},U()(g,"setError",function(t,e){t.errors=e}),U()(g,k,function(t,e){t.isAuthenticated=!0,t.user=e,t.errors={},R(t.user.token)}),U()(g,"auth/PURGE_AUTH",function(t){t.isAuthenticated=!1,t.user={},t.errors={},H()}),g),getters:{currentUser:function(t){return t.user},isAuthenticated:function(t){return t.isAuthenticated}}};n.a.use(l.a);var G=new l.a.Store({modules:{auth:$}}),D={name:"viewLogin",data:function(){return{email:null,password:null}},methods:{onSubmit:function(t,e){var r=this;this.$store.dispatch("auth/LOGIN",{email:t,password:e}).then(function(){return r.$router.push({name:"home"})})}},computed:u()({},Object(l.c)({errors:function(t){return t.auth.errors}}))},V={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"auth-page"},[r("div",{staticClass:"container page"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 offset-md-3 col-xs-12"},[r("h1",{staticClass:"text-xs-center"},[t._v("Sign in")]),t._v(" "),r("p",{staticClass:"text-xs-center"},[r("router-link",{attrs:{to:{name:"register"}}},[t._v("\n            Need an account?\n          ")])],1),t._v(" "),t.errors?r("ul",{staticClass:"error-messages"},t._l(t.errors,function(e,n){return r("li",{key:n},[t._v(t._s(n)+" "+t._s(t._f("error")(e)))])}),0):t._e(),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(t.email,t.password)}}},[r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),r("fieldset",{staticClass:"form-group"},[r("router-link",{attrs:{to:{name:"forget_password",params:{}}}},[t._v("\n              or click here to reset password\n            ")])],1),t._v(" "),r("button",{staticClass:"btn btn-lg btn-primary pull-xs-right"},[t._v("\n            Sign in\n          ")])])])])])])},staticRenderFns:[]},O=r("VU/8")(D,V,!1,null,null,null).exports,I={name:"RwvRegister",data:function(){return{username:"",email:"",password:""}},computed:u()({},Object(l.c)({errors:function(t){return t.auth.errors}})),methods:{onSubmit:function(){var t=this;this.$store.dispatch("auth/REGISTER",{email:this.email,password:this.password,username:this.username}).then(function(){return t.$router.push({name:"home"})})}}},M={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"auth-page"},[r("div",{staticClass:"container page"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 offset-md-3 col-xs-12"},[r("h1",{staticClass:"text-xs-center"},[t._v("Sign up")]),t._v(" "),r("p",{staticClass:"text-xs-center"},[r("router-link",{attrs:{to:{name:"login"}}},[t._v("\n            Have an account?\n          ")])],1),t._v(" "),t.errors?r("ul",{staticClass:"error-messages"},t._l(t.errors,function(e,n){return r("li",{key:n},[t._v(t._s(n)+" "+t._s(t._f("error")(e)))])}),0):t._e(),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),r("button",{staticClass:"btn btn-lg btn-primary pull-xs-right"},[t._v("\n            Sign up\n          ")])])])])])])},staticRenderFns:[]},j=r("VU/8")(I,M,!1,null,null,null).exports,q=(r("VU/8")({name:"MerchantCard"},null,!1,null,null,null).exports,{name:"viewHome",data:function(){return{merchants:[{id:1,image:"https://via.placeholder.com/220",name:"Thirsty Guys",tags:["Food Court","Bubble Tea","Beverages"],address:"Faculty of Science S16, NUS",distance:.67,currentDiscount:.67},{id:1,image:"https://via.placeholder.com/220",name:"Gohan Gohan",tags:["Food Court","Curry","Rice"],address:"Faculty of Science S16, NUS",distance:.67,currentDiscount:.67},{id:1,image:"https://via.placeholder.com/220",name:"Nasi Club",tags:["Food Court","Rice","Lemak"],address:"Faculty of Science S16, NUS",distance:.67,currentDiscount:.67},{id:1,image:"https://via.placeholder.com/220",name:"Serious Salads",tags:["Food Court","Healthy","Salad"],address:"Faculty of Science S16, NUS",distance:.67,currentDiscount:.67},{id:1,image:"https://via.placeholder.com/220",name:"Daily Bowl",tags:["Food Court","Salad","Quinoa"],address:"Faculty of Science S16, NUS",distance:.67,currentDiscount:.67},{id:1,image:"https://via.placeholder.com/220",name:"Test Merchant",tags:["Food Court","Salad","Quinoa"],address:"Faculty of Science S16, NUS",distance:.67,currentDiscount:.67}]}},methods:{openMerchant:function(){alert("ok")}},computed:u()({},Object(l.c)({errors:function(t){return t.auth.errors}}))}),L={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home-page"},[r("div",{staticClass:"container page"},[t._m(0),t._v(" "),r("div",{staticClass:"row justify-content-center"},t._l(t.merchants,function(e,n){return r("div",{key:n,staticClass:"col-xs-6 col-md-3 itemGrid",on:{click:t.openMerchant}},[r("img",{staticClass:"img-fluid",attrs:{src:e.image}}),t._v(" "),r("small",t._l(e.tags,function(n,a){return r("span",{key:a,staticClass:"merchantTags"},[t._v("\n            "+t._s(n)+"\n            "),a!=e.tags.length-1?r("span",[t._v(" - ")]):t._e()])}),0),r("br"),t._v(" "),r("b",[t._v(t._s(e.name.toUpperCase()))]),r("br"),t._v(" "),r("span",[t._v(t._s(e.address))]),r("br")])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",[e("b",[this._v("Food and Beverage")])])}]};var Y=r("VU/8")(q,L,!1,function(t){r("qVui")},"data-v-08604cf6",null).exports,z={name:"Settings",computed:u()({},Object(l.b)(["currentUser"])),methods:{updateSettings:function(){var t=this;this.$store.dispatch(UPDATE_USER,this.currentUser).then(function(){t.$router.push({name:"home"})})},logout:function(){var t=this;this.$store.dispatch("auth/LOGOUT").then(function(){t.$router.push({name:"home"})})}}},B={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("h1",[r("b",[t._v("Hi "+t._s(t.currentUser.username)+"!")])]),t._v(" "),r("hr")])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("h1",[t._v("Your Settings")]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.updateSettings()}}},[r("fieldset",[r("fieldset",{staticClass:"form-group"},[t._v("\n\t\t\t\t\t\tName\n\t\t\t\t\t\t"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentUser.username,expression:"currentUser.username"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Your username"},domProps:{value:t.currentUser.username},on:{input:function(e){e.target.composing||t.$set(t.currentUser,"username",e.target.value)}}})]),r("br"),t._v(" "),r("fieldset",{staticClass:"form-group"},[t._v("\n\t\t\t\t\t\tEmail\n\t\t\t\t\t\t"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentUser.email,expression:"currentUser.email"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.currentUser.email},on:{input:function(e){e.target.composing||t.$set(t.currentUser,"email",e.target.value)}}})]),r("br"),t._v(" "),r("fieldset",{staticClass:"form-group"},[t._v("\n\t\t\t\t\t\tPasssword\n\t\t\t\t\t\t"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentUser.password,expression:"currentUser.password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.currentUser.password},on:{input:function(e){e.target.composing||t.$set(t.currentUser,"password",e.target.value)}}})]),r("br"),t._v(" "),r("fieldset",{staticClass:"form-group"},[t._v("\n\t\t\t\t\t\tRepeat Passsword\n\t\t\t\t\t\t"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentUser.password,expression:"currentUser.password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.currentUser.password},on:{input:function(e){e.target.composing||t.$set(t.currentUser,"password",e.target.value)}}})]),t._v(" "),r("button",{staticClass:"btn btn-lg btn-primary pull-xs-right"},[t._v("\n\t\t\t\t\t\tUpdate Settings\n\t\t\t\t\t")])])]),t._v(" "),r("hr"),t._v(" "),r("button",{staticClass:"btn btn-outline-danger",on:{click:t.logout}},[t._v("\n\t\t\t\tLogout\n\t\t\t")])])])])},staticRenderFns:[]},K=r("VU/8")(z,B,!1,null,null,null).exports,Q={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("h1",[t._v("Forget password")]),t._v(" "),r("form",[r("fieldset",[r("fieldset",{staticClass:"form-group"},[t._v("\n\t\t\t\t\t\tEmail\n\t\t\t\t\t\t"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentUser.email,expression:"currentUser.email"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.currentUser.email},on:{input:function(e){e.target.composing||t.$set(t.currentUser,"email",e.target.value)}}})]),r("br"),t._v(" "),r("button",{staticClass:"btn btn-lg btn-primary pull-xs-right"},[t._v("\n\t\t\t\t\t\tForget password\n\t\t\t\t\t")])])])])])])},staticRenderFns:[]},W=r("VU/8")({name:"ForgetPasswordRequest"},Q,!1,null,null,null).exports,J={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"container"},[this._v("\n\tThis is merchant page Yahoo!\n")])},staticRenderFns:[]};var X=r("VU/8")({name:"viewMerchant",data:function(){return{}}},J,!1,function(t){r("FNVz")},"data-v-6b3e5334",null).exports;n.a.use(b.a);var Z=new b.a({routes:[{path:"/",redirect:"/home"},{name:"login",path:"/login",component:O},{name:"register",path:"/register",component:j},{name:"home",path:"/home",component:Y,meta:{requiresAuth:!0}},{name:"settings",path:"/settings",component:K,meta:{requiresAuth:!0}},{name:"merchant",path:"/merchant/:mID",component:X,props:!0,meta:{requiresAuth:!0}},{name:"forget_password",path:"/forget_password",component:W},{name:"NotFound",path:"*",redirect:"/"}]});Z.beforeEach(function(t,e,r){var n=t.matched.some(function(t){return t.meta.requiresAuth}),a=["login","register","forget_password"].includes(t.name);n?C.a.all([G.dispatch("auth/CHECK_AUTH")]).then(function(t){0==t[0]&&r("login")}):C.a.all([G.dispatch("auth/CHECK_AUTH")]).then(function(t){0==t[0]?r():a?r("home"):r()}),r()});var tt=Z,et=r("Eoz/"),rt=r.n(et),nt={currentCoordinates:function(){navigator;return new C.a(function(t,e){navigator.geolocation.getCurrentPosition(function(e){var r=e.coords;return t(r)},function(t){return e(t)})})}};r.d(e,"db",function(){return at}),n.a.use(s.a),n.a.config.productionTip=!1,P.init(),console.log(nt.currentCoordinates()),n.a.filter("date",function(t){return rt()(new Date(t),"MMMM D, YYYY")}),n.a.filter("error",function(t){return""+t[0]}),i.a.initializeApp({projectId:"vue-app-fb29a",messagingSenderId:"972401469784"});var at=i.a.firestore();new n.a({el:"#app",router:tt,store:G,components:{App:_},template:"<App/>"})},qVui:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5c2c8bac1dd64189226d.js.map